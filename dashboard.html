<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Loteamento Ibiza</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./css/dashboard.css">
    <link rel="shortcut icon" href="./img/Logo caiçaras.png" type="image/x-icon">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <img src="./img/Logo caiçaras.png" alt="Logo" class="sidebar-logo">
            <h4>Dashboard Ibiza</h4>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li><a href="#dashboard" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a></li>
                <li><a href="#lotes" class="nav-link" data-section="lotes">
                    <i class="fas fa-map-marked-alt"></i> Gerenciar Lotes
                </a></li>
                <li><a href="#carrossel" class="nav-link" data-section="carrossel">
                    <i class="fas fa-images"></i> Carrossel
                </a></li>
                <li><a href="#preview" class="nav-link" data-section="preview">
                    <i class="fas fa-eye"></i> Preview do Site
                </a></li>
                <li><a href="#configuracoes" class="nav-link" data-section="configuracoes">
                    <i class="fas fa-cog"></i> Configurações
                </a></li>
                <li><a href="#backup" class="nav-link" data-section="backup">
                    <i class="fas fa-download"></i> Backup & Restore
                </a></li>
                <li><a href="index.html" class="nav-link" target="_blank">
                    <i class="fas fa-external-link-alt"></i> Ver Site
                </a></li>
            </ul>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Header -->
        <header class="dashboard-header">
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1 id="pageTitle">Dashboard</h1>
            <div class="header-actions">
                <span class="user-info">
                    <i class="fas fa-user-circle"></i> Administrador
                </span>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="content-section active">
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalLotes">0</h3>
                        <p>Total de Lotes</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="lotesDisponiveis">0</h3>
                        <p>Lotes Disponíveis</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="valorTotal">R$ 0</h3>
                        <p>Valor Total</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="stat-info">
                        <h3>1.234</h3>
                        <p>Visualizações</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-charts">
                <div class="chart-card">
                    <h4>Lotes por Status</h4>
                    <canvas id="statusChart"></canvas>
                </div>
                <div class="recent-activity">
                    <h4>Atividade Recente</h4>
                    <div class="activity-list" id="activityList">
                        <div class="activity-item">
                            <i class="fas fa-plus-circle text-success"></i>
                            <span>Novo lote adicionado: Long Town</span>
                            <small>2 horas atrás</small>
                        </div>
                        <div class="activity-item">
                            <i class="fas fa-edit text-warning"></i>
                            <span>Lote editado: Garden Ville</span>
                            <small>5 horas atrás</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Lotes Management Section -->
        <section id="lotes-section" class="content-section">
            <div class="section-header">
                <h2>Gerenciar Lotes</h2>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#loteModal" onclick="openLoteModal()">
                    <i class="fas fa-plus"></i> Adicionar Lote
                </button>
            </div>

            <div class="lotes-grid" id="lotesGrid">
                <!-- Lotes serão carregados aqui dinamicamente -->
            </div>
        </section>

        <!-- Carrossel Management Section -->
        <section id="carrossel-section" class="content-section">
            <div class="section-header">
                <h2>Gerenciar Carrossel</h2>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#carrosselModal">
                    <i class="fas fa-plus"></i> Adicionar Slide
                </button>
            </div>

            <div class="carrossel-items" id="carrosselItems">
                <!-- Slides do carrossel serão carregados aqui -->
            </div>
        </section>

        <!-- Preview Section -->
        <section id="preview-section" class="content-section">
            <div class="section-header">
                <h2>Preview do Site</h2>
                <div class="preview-controls">
                    <button class="btn btn-primary" onclick="refreshPreview()">
                        <i class="fas fa-sync-alt"></i> Atualizar Preview
                    </button>
                    <button class="btn btn-success" onclick="openSiteInNewTab()">
                        <i class="fas fa-external-link-alt"></i> Abrir Site
                    </button>
                </div>
            </div>

            <div class="preview-container">
                <div class="preview-device-selector">
                    <button class="btn btn-outline-primary device-btn active" data-device="desktop">
                        <i class="fas fa-desktop"></i> Desktop
                    </button>
                    <button class="btn btn-outline-primary device-btn" data-device="tablet">
                        <i class="fas fa-tablet-alt"></i> Tablet
                    </button>
                    <button class="btn btn-outline-primary device-btn" data-device="mobile">
                        <i class="fas fa-mobile-alt"></i> Mobile
                    </button>
                </div>
                <div class="preview-frame-container">
                    <iframe id="sitePreview" src="index.html" class="preview-frame desktop"></iframe>
                </div>
            </div>
        </section>

        <!-- Configurações Section -->
        <section id="configuracoes-section" class="content-section">
            <div class="section-header">
                <h2>Configurações do Site</h2>
                <button class="btn btn-info" onclick="aplicarConfiguracoes()">
                    <i class="fas fa-magic"></i> Aplicar & Visualizar
                </button>
            </div>

            <div class="config-form">
                <div class="config-group">
                    <h4>Informações de Contato</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="telefone" class="form-label">Telefone</label>
                            <input type="text" class="form-control" id="telefone" value="(34) 99999-9999">
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">E-mail</label>
                            <input type="email" class="form-control" id="email" value="contato@ibizaloteamentos.com">
                        </div>
                    </div>
                    <div class="mt-3">
                        <label for="endereco" class="form-label">Endereço</label>
                        <input type="text" class="form-control" id="endereco" value="Av. dos Loteamentos, 123 - Cidade, Estado">
                    </div>
                </div>

                <div class="config-group">
                    <h4>Configurações Gerais</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <label for="tituloSite" class="form-label">Título do Site</label>
                            <input type="text" class="form-control" id="tituloSite" value="Loteamento Ibiza">
                        </div>
                        <div class="col-md-6">
                            <label for="subtitulo" class="form-label">Subtítulo</label>
                            <input type="text" class="form-control" id="subtitulo" value="O lugar perfeito para construir seus sonhos espera por você!">
                        </div>
                    </div>
                </div>

                <button class="btn btn-success mt-3" onclick="salvarConfiguracoes()">
                    <i class="fas fa-save"></i> Salvar Configurações
                </button>
            </div>
        </section>

        <!-- Backup & Restore Section -->
        <section id="backup-section" class="content-section">
            <div class="section-header">
                <h2>Backup & Restore</h2>
            </div>

            <div class="backup-container">
                <div class="backup-card">
                    <div class="backup-icon">
                        <i class="fas fa-download"></i>
                    </div>
                    <div class="backup-content">
                        <h4>Exportar Dados</h4>
                        <p>Faça backup de todos os lotes, configurações e slides do carrossel</p>
                        <button class="btn btn-primary" onclick="exportarDados()">
                            <i class="fas fa-download"></i> Exportar Backup
                        </button>
                    </div>
                </div>

                <div class="backup-card">
                    <div class="backup-icon">
                        <i class="fas fa-upload"></i>
                    </div>
                    <div class="backup-content">
                        <h4>Importar Dados</h4>
                        <p>Restaure dados de um arquivo de backup anterior</p>
                        <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importarDados(event)">
                        <button class="btn btn-warning" onclick="document.getElementById('importFile').click()">
                            <i class="fas fa-upload"></i> Importar Backup
                        </button>
                    </div>
                </div>

                <div class="backup-card">
                    <div class="backup-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <div class="backup-content">
                        <h4>Sincronizar Site</h4>
                        <p>Force a sincronização dos dados com o site principal</p>
                        <button class="btn btn-info" onclick="sincronizarSite()">
                            <i class="fas fa-sync-alt"></i> Sincronizar Agora
                        </button>
                    </div>
                </div>

                <div class="backup-card danger">
                    <div class="backup-icon">
                        <i class="fas fa-trash-alt"></i>
                    </div>
                    <div class="backup-content">
                        <h4>Reset Completo</h4>
                        <p>Apagar todos os dados e restaurar configurações padrão</p>
                        <button class="btn btn-danger" onclick="resetCompleto()">
                            <i class="fas fa-exclamation-triangle"></i> Reset Total
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal para Lotes -->
    <div class="modal fade" id="loteModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loteModalTitle">Adicionar Novo Lote</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="loteForm">
                        <input type="hidden" id="loteId">
                        <div class="row">
                            <div class="col-md-6">
                                <label for="loteTitulo" class="form-label">Título do Lote</label>
                                <input type="text" class="form-control" id="loteTitulo" required>
                            </div>
                            <div class="col-md-6">
                                <label for="loteCodigo" class="form-label">Código</label>
                                <input type="text" class="form-control" id="loteCodigo" required>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6">
                                <label for="loteValor" class="form-label">Valor (R$)</label>
                                <input type="text" class="form-control" id="loteValor" required>
                            </div>
                            <div class="col-md-6">
                                <label for="loteTamanho" class="form-label">Tamanho</label>
                                <input type="text" class="form-control" id="loteTamanho" required>
                            </div>
                        </div>
                        <div class="mt-3">
                            <label for="loteImagens" class="form-label">URLs das Imagens (separadas por vírgula)</label>
                            <textarea class="form-control" id="loteImagens" rows="3" placeholder="./img/lote-1.webp, ./img/lote-2.webp, ./img/lote-3.jpg"></textarea>
                        </div>
                        <div class="mt-3">
                            <label for="loteDescricao" class="form-label">Descrição</label>
                            <textarea class="form-control" id="loteDescricao" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarLote()">Salvar Lote</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Carrossel -->
    <div class="modal fade" id="carrosselModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Adicionar Slide ao Carrossel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="carrosselForm">
                        <div class="mb-3">
                            <label for="slideImagem" class="form-label">URL da Imagem</label>
                            <input type="text" class="form-control" id="slideImagem" required>
                        </div>
                        <div class="mb-3">
                            <label for="slideTitulo" class="form-label">Título</label>
                            <input type="text" class="form-control" id="slideTitulo" required>
                        </div>
                        <div class="mb-3">
                            <label for="slideDescricao" class="form-label">Descrição</label>
                            <textarea class="form-control" id="slideDescricao" rows="3" required></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="salvarSlide()">Salvar Slide</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/dashboard.js"></script>
</body>
</html>
